<form [formGroup]="form" novalidate (ngSubmit)="onSubmit()" fxLayout="column">

  <div *ngIf="patient && intakeForm && physician" fxLayout="row" fxLayoutGap="10px">

    <div fxLayout="column">

      <!-- PATIENT INFORMATION-->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>PATIENT INFORMATION</h4>
        <div fxLayout="row" fxLayoutGap="10px">
          <div fxLayout="column">
            <div>Patient Name:</div>
            <div>Address:</div>
            <div>Phone:</div>
            <div>Weight:</div>
            <div>Height:</div>
            <div>Shoe Size:</div>
            <div>Age:</div>
            <div>Date of Birth:</div>
            <div>Gender:</div>
          </div>

          <div fxLayout="column">
            <div>{{patient?.firstName}} {{patient?.lastName}}</div>
            <div>
              {{patient?.address.addressLineOne}}
              {{patient?.address.addressLineTwo}}
              {{patient?.address.city}}, {{patient?.address.state}} {{patient?.address.zip}}
            </div>
            <div *ngIf="patient?.phoneNumber">{{patient?.phoneNumber | phone}}</div>
            <div>{{patient?.weight}}</div>
            <div>{{patient?.height}}</div>
            <div>{{patient?.shoeSize}}</div>
            <div>NA</div>
            <div *ngIf="patient?.dateOfBirth">{{patient?.dateOfBirth | date}}</div>
            <div *ngIf="patient?.sex"> {{patient?.sex | sex }}</div>
          </div>
        </div>
      </div>

      <!-- DIAGNOSIS-->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>DIAGNOSIS</h4>
        <div fxLayout="column">
          <div>{{getAnswer('PaintChart')}} pain. </div>
          <mat-checkbox *ngFor="let item of diagnosisOptions; let i = index" [value]="i" color="primary"
            (change)="onDiagnosisCheck($event, i)">
            {{item.text}}
          </mat-checkbox>
          <mat-form-field>
            <input matInput placeholder="Other" type="text" formControlName="diagnosis_other">
          </mat-form-field>
        </div>
      </div>

      <!-- STATEMENT OF MEDICAL NECESSITY-->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>STATEMENT OF MEDICAL NECESSITY</h4>
        <div>
          The orthotic device or devices ordered as of the result of this examination is being prescribed as
          adjunctive therapy to assist in reducing the level of pain and symptoms associated with the patient’s
          identiﬁed diagnosis, and for overall improvement in the patient’s quality of life.
        </div>
      </div>

      <!-- PREVIOUSLY TRIED TREATMENTS-->
      <h4>PREVIOUSLY TRIED TREATMENTS</h4>
      <div>{{getAnswer('PainSelfTreatment')}}</div>

      <h4>PAIN LEVEL DESCRIBED BY PATIENT</h4>
      <div>{{getAnswer('PainLevel')}} on a 0-10 scale</div>

      <h4>ORDER VERIFICATION</h4>
      <div>I, Dr. {{physician?.firstName}} {{physician?.lastName}}, verify and conﬁrm this order for the
        above-named patient, and certify that I have personally performed the assessment of the patient for the
        prescribed treatment and device and verify that it is reasonably and medically necessary, according to
        accepted standards of medical practice within the community, for this patient’s medical condition. I hereby
        aﬃrm this documentation as part of this patient’s medical record.
      </div>

    </div>

    <div fxLayout="column">

      <!-- Physician INFORMATION -->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>PHYSICIAN INFORMATION</h4>
        <div fxLayout="row" fxLayoutGap="10px">
          <div fxLayout="column">
            <div>Name:</div>
            <div>NPI:</div>
            <div>DEA:</div>
            <div>Address:</div>
            <div>Phone:</div>
            <div>Fax:</div>
            <div>Date of Service:</div>
          </div>

          <div fxLayout="column">
            <div>{{physician?.firstName}} {{physician?.lastName}}</div>
            <div>{{physician?.npi}}</div>
            <div>{{physician?.dea}}</div>
            <div> {{physician?.address.addressLineOne}}
              {{physician?.address.addressLineTwo}}
              {{physician?.address.city}}, {{physician?.address.state}} {{physician?.address.zip}}</div>
            <div *ngIf="physician?.phoneNumber">{{physician?.phoneNumber | phone}}</div>
            <div *ngIf="physician?.faxNumber">{{physician?.faxNumber | phone}}</div>
            <div>{{today | date}}</div>
          </div>
        </div>
      </div>

      <!-- INSURANCE INFORMATION -->
      <div fxLayout="column">

        <h4>INSURANCE INFORMATION</h4>
        <div>Insurance Type:
          {{patient?.insurance | insuranceType}}
        </div>
        <div *ngIf="patient?.insurance === 1 || patient?.insurance === 2">
          <div>Medicare Inforamtion</div>
          <div> Member Id: {{patient?.medicare.memberId}}</div>
          <div>Patient Group: {{patient?.medicare.patientGroup}}</div>
          <div>PCN: {{patient?.medicare.pcn}}</div>
          <div>Subscriber #: {{patient?.medicare.subscriberNumber}}</div>
        </div>
        <div *ngIf="patient?.insurance === 0 || patient?.insurance === 2">
          <div>Private Insurance Inforamtion</div>
          <div>Insurance Id: {{patient?.privateInsurance.insuranceId}}</div>
          <div>Patient Group: {{patient?.privateInsurance.group}}</div>
          <div>PCN: {{patient?.privateInsurance.pcn}}</div>
          <div>Bin: {{patient?.privateInsurance.bin}}</div>
        </div>
      </div>

      <!--ORTHOSIS DEVICE(S) PRESCRIBED-->
      <!-- DONE -->
      <div fxLayout=" column">
        <h4>ORTHOSIS DEVICE(S) PRESCRIBED</h4>
        <div fxLayout="column">
          Based on my examination of this patient, I am ordering the following orthosis for the
          {{getAnswer('PaintChart')}}:

          <div *ngFor="let item of lcodeOptions; let i = index">
            <mat-checkbox color="primary" (change)="onLCodeCheck($event, i)" [value]="i">
            </mat-checkbox>
            <span> {{item.text}}</span>
          </div>

          <mat-form-field>
            <input matInput placeholder="Other" type="text" formControlName="lcode_other">
          </mat-form-field>

          <div>Patient should begin using the orthosis as needed. Length of need:</div>
          <mat-form-field>
            <input matInput placeholder="Length Of Need*" type="text" formControlName="productDuration">
            <mat-error *ngIf="form.get('productDuration').hasError('required')">This field is required.
            </mat-error>
          </mat-form-field>

        </div>

      </div>

      <div>First date patient is authorized to begin using {{product}} : {{today | date}}</div>

      <!--Treatement Goals-->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>TREATMENT GOALS</h4>
        <div>My treatment goal(s) for the use of the prescribed orthosis are:</div>
        <div>• Support weak musculature </div>
        <div>• Improvement in Patient’s function </div>
        <div>• Decrease in Patient’s pain </div>
        <div>• To assist the patient or improve activities of daily living </div>
        <div>• To aid in the stabilization of the {{getAnswer('PaintChart')}} </div>
        <div>• To aid in controlling unwanted movements in the area of pain </div>
        <div>• Slow degenerative changes </div>
        <div>• Reduce potential inﬂammation </div>
      </div>

      <!--DDITIONAL DOCTOR NOTES-->
      <!-- DONE -->
      <div fxLayout="column">
        <h4>ADDITIONAL DOCTOR NOTES:</h4>
        <mat-form-field>
          <input matInput placeholder="Additional Notes" type="text" formControlName="additional_notes">
        </mat-form-field>
      </div>


    </div>

  </div>

  <!-- signature -->
  <div fxLayout="column">
    <div>____________________________________________X {{today | date:'short'}}</div>
    <div>Electronically Signed and Dated: {{today | date:'short'}}</div>
    <div>{{physician?.firstName}} {{physician?.lastName}}</div>
    <div>NPI: {{physician?.npi}}</div>
    <div>DEA: {{physician?.dea}}</div>
  </div>

</form>